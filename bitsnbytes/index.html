<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bits & Bytes Tech Store</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="header-flex">
            <h1>Bits & Bytes Tech Store</h1>
            <a href="checkout.html" class="checkout-link">Go to Checkout</a>
        </div>
        <p>Your one-stop shop for the latest tech gadgets!</p>
    </header>
    <div class="main-content">
        <div class="container">
            <h2>Featured Products</h2>
            <div class="products">
                <div class="product">
                    <img src="https://www.scan.co.uk/images/products/xlarge/2441289-xl-a.jpg" alt="USB Drive">
                    <h3>64GB USB 3.0 Flash Drive</h3>
                    <p>Fast 64GB USB 3.0 drive for quick file transfers and backups. Compact, durable, and widely compatible.</p>
                    <div class="price">£14.78</div>
                    <button class="buy-btn" onclick="addToCart('64GB USB 3.0 Flash Drive', 14.78)">Buy Now</button>
                </div>
                <div class="product">
                    <img src="https://i.ebayimg.com/images/g/5eoAAOSwIEdixAtd/s-l1200.jpg" alt="Mechanical Keyboard">
                    <h3>Mechanical Keyboard</h3>
                    <p>RGB backlit keyboard with tactile switches. Great for gaming and typing, sturdy and reliable.</p>
                    <div class="price">£45.18</div>
                    <button class="buy-btn" onclick="addToCart('Mechanical Keyboard', 45.18)">Buy Now</button>
                </div>
                <div class="product">
                    <img src="https://www.ryman.co.uk/media/catalog/product/1/6/1605020029_1.jpg?quality=80&bg-color=255,255,255&fit=bounds&height=550&width=550&canvas=550:550" alt="Wireless Mouse">
                    <h3>Wireless Mouse</h3>
                    <p>Ergonomic wireless mouse with long battery life and smooth, precise tracking. Silent and comfortable.</p>
                    <div class="price">£13.29</div>
                    <button class="buy-btn" onclick="addToCart('Wireless Mouse', 13.29)">Buy Now</button>
                </div>
                <div class="product">
                    <img src="https://gladiatorpc.co.uk//assets/img/configurator/72971Image1.webp" alt="Gaming PC">
                    <h3>Crystal Gaming PC</h3>
                    <p>RTX 5090, 24-core CPU, RGB lighting. Built for high-end gaming, streaming, and content creation.</p>
                    <div class="price">£4,299.99</div>
                    <button class="buy-btn" onclick="addToCart('Crystal Gaming PC', 4299.99)">Buy Now</button>
                </div>
                <div class="product">
                    <img src="https://www.punchtechnology.co.uk/wp-content/uploads/2025/03/P500CWmain.webp" alt="Elite X Gaming PC">
                    <h3>Elite X Gaming PC</h3>
                    <p>Core i5-12600KF, 10 cores, 16 threads. Smooth gaming and multitasking in a sleek case.</p>
                    <div class="price">£1,458.24</div>
                    <button class="buy-btn" onclick="addToCart('Elite X Gaming PC', 1458.24)">Buy Now</button>
                </div>
                <div class="product">
                    <img src="https://m.media-amazon.com/images/I/51-kkNP6OcL.jpg" alt="Xbox Series X">
                    <h3>Xbox Series X</h3>
                    <p>1TB storage, 4K gaming, fast load times. Play the latest games with top performance.</p>
                    <div class="price">£549.99</div>
                    <button class="buy-btn" onclick="addToCart('Xbox Series X', 549.99)">Buy Now</button>
                </div>
                <div class="product">
                    <img src="https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/airpods-pro-2-hero-select-202409?wid=976&hei=916&fmt=jpeg&qlt=90&.v=WTk1dTl5UTBnZXdKN2tua2pFb1hvQ3hmVXd6RnorM2pzUlRIKzNkUEN0U2VDYXovZDMyN1dXU211bjZoVlVUcWJGcXNRQnFCV0w3WVRjTExvdm1ic1dyYTFZWlpPczBocnFKR3FYSlo5L1FXZEdHNUFPR0hYUU12cjI0VlFzM1A" alt="AirPods Pro 2">
                    <h3>AirPods Pro 2</h3>
                    <p>Wireless earbuds with noise cancellation, transparency mode, and up to 30 hours battery with case.</p>
                    <div class="price">£229.99</div>
                    <button class="buy-btn" onclick="addToCart('AirPods Pro 2', 229.99)">Buy Now</button>
                </div>
                <div class="product">
                    <img src="https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/watch-compare-series10-202409?wid=396&hei=468&fmt=jpeg&qlt=90&.v=eEpjZGlsbzI4YmtuR2pKQXNDTzZ5OHdLenFEVzBFbmc5cWdOTTluM2hZWGV1cmxobUVZdDkrTXpHWE9ISzNacnVUb3VPa2FUZVhQMFhDQnVBMWhwQTY0aVFxVnBhZFRPOTBCN1FmZExyV28" alt="Apple Watch Series 10">
                    <h3>Apple Watch Series 10</h3>
                    <p>46mm or 42mm case, fitness and sleep tracking, heart rate monitor, seamless iPhone integration.</p>
                    <div class="price">£399.99</div>
                    <button class="buy-btn" onclick="addToCart('Apple Watch Series 10', 399.99)">Buy Now</button>
                </div>
                <div class="product">
                    <img src="https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/homepod-mini-select-202110?wid=2000&hei=2000&fmt=jpeg&qlt=95&.v=1632925511000" alt="HomePod mini (speaker)">
                    <h3>HomePod mini (speaker)</h3>
                    <p>Compact smart speaker with rich sound and Siri. Control your home and play music hands-free.</p>
                    <div class="price">£99.99</div>
                    <button class="buy-btn" onclick="addToCart('HomePod mini (speaker)', 99.99)">Buy Now</button>
                </div>
                <div class="product">
                    <img src="https://encrypted-tbn1.gstatic.com/shopping?q=tbn:ANd9GcRRFonEMfLrB9Bh9o_Z1Zk2kroBhdfOth_kfGr_6BG6zbLq9MS8nFvYkAo04NqKlm2Y-vGercUXdfVAFxjcxsdUuQRsYj7W8EZso13gpgRF&usqp=CAc" alt="27&quot; 4K UHD Monitor">
                    <h3>27&quot; 4K UHD Monitor</h3>
                    <p>27-inch 4K IPS display, vibrant colors, 60Hz, HDMI & DisplayPort. Great for work and play.</p>
                    <div class="price">£329.99</div>
                    <button class="buy-btn" onclick="addToCart('27&quot; 4K UHD Monitor', 329.99)">Buy Now</button>
                </div>
                <div class="product">
                    <img src="https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/mbp14-spaceblack-select-202410?wid=904&hei=840&fmt=jpeg&qlt=90&.v=YnlWZDdpMFo0bUpJZnBpZjhKM2M3VGhTSEZFNjlmT2xUUDNBTjljV1BxWVk4UDMvOWNCVUEyZk1VN2FtQlpZWXZvdUZlR0V0VUdJSjBWaDVNVG95Yk15Y0c3T3Y4UWZwZExHUFdTUC9lN28" alt="MacBook Pro 14&quot; (M4)">
                    <h3>MacBook Pro 14&quot; (M4)</h3>
                    <p>Apple M4 chip, 14-inch Liquid Retina XDR display, 18-hour battery, 512GB SSD, Space Gray.</p>
                    <div class="price">£1,599.00</div>
                    <button class="buy-btn" onclick="addToCart('MacBook Pro 14&quot; (M4)', 1599.00)">Buy Now</button>
                </div>
                <div class="product">
                    <img src="https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/mba13-midnight-select-202503?wid=904&hei=840&fmt=jpeg&qlt=90&.v=MWFRUnJZcWcrd0xyc0tIOUdIbnJlOHczdHAzblZaL0FESGR4bXVQbTV4enduUmtmZWhyRUFZaHRPR2w4Si80ak14MXJScFRZN3Y5OWZsRXVrN1k4cFJjVEh5WndaMEhPVUZ4bHVJY3JRYVU" alt="MacBook Air 13&quot; (M4)">
                    <h3>MacBook Air 13&quot; (M4)</h3>
                    <p>Apple M4 chip, 13-inch Liquid Retina display, ultra-light, 18-hour battery, 256GB SSD, Midnight.</p>
                    <div class="price">£999.00</div>
                    <button class="buy-btn" onclick="addToCart('MacBook Air 13&quot; (M4)', 999.00)">Buy Now</button>
                </div>
            </div>
        </div>
        <div class="container" style="text-align:center;">
            <a href="catalogue.html" class="buy-btn" style="font-size:1.1rem; padding:0.7rem 2rem; margin-top:2rem; display:inline-block;">View Full Catalogue</a>
            <a href="contact.html" class="buy-btn" style="font-size:1.1rem; padding:0.7rem 2rem; margin-top:1rem; display:inline-block; background:#222; color:#cdf714; border:1px solid #cdf714;">Contact Us</a>
        </div>
    </div>
    <div class="cart-sidebar" id="cartSidebar">
        <h3>Shopping List</h3>
        <div class="cart-list" id="cartList">
            <p style="text-align:center; color:#cdf714;">Your cart is empty.</p>
        </div>
        <div class="cart-total" id="cartTotal"></div>
        <button class="clear-cart-btn" onclick="clearCart()">Clear Cart</button>
    </div>
    <footer>
        &copy; 2025 Bits & Bytes Tech Store. All rights reserved.
    </footer>
    <script>
        function getCart() {
            try {
                const cart = JSON.parse(localStorage.getItem('cart'));
                return Array.isArray(cart) ? cart : [];
            } catch {
                return [];
            }
        }
        function setCart(cart) {
            localStorage.setItem('cart', JSON.stringify(cart));
        }
        function addToCart(name, price) {
            price = Number(price); // Ensure price is a number
            let cart = getCart();
            let found = cart.find(item => item.name === name);
            if (found) {
                found.qty += 1;
            } else {
                cart.push({ name, price, qty: 1 });
            }
            setCart(cart);
            renderCart();
        }
        function clearCart() {
            setCart([]);
            renderCart();
        }
        function renderCart() {
            let cart = getCart();
            let cartList = document.getElementById('cartList');
            let cartTotal = document.getElementById('cartTotal');
            let checkoutLink = document.querySelector('.checkout-link');
            if (!cart || cart.length === 0) {
                cartList.innerHTML = '<p style="text-align:center; color:#cdf714;">Your cart is empty.</p>';
                cartTotal.textContent = '';
                checkoutLink.classList.remove('visible');
                localStorage.removeItem('subtotal');
                return;
            }
            let html = '';
            let subtotal = 0;
            cart.forEach(item => {
                // Defensive: ensure price is a number
                let price = Number(item.price);
                html += `<div class="cart-item">
                    <span>${item.name} x${item.qty}</span>
                    <span>£${(price * item.qty).toFixed(2)}</span>
                </div>`;
                subtotal += price * item.qty;
            });
            cartList.innerHTML = html;
            cartTotal.innerHTML =
                'Total: £' + subtotal.toFixed(2);
            localStorage.setItem('subtotal', subtotal.toFixed(2));
            checkoutLink.classList.add('visible');
            checkoutLink.setAttribute('href', 'checkout.html');
        }
        document.addEventListener('DOMContentLoaded', function() {
            renderCart();
        });
    </script>
</body>
</html>